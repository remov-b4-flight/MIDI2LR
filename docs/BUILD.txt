Prerequisites
--------------------

Lightroom is required for building the application.

On Windows, you need Visual Studio 2022 (the Community edition is free). 
On Mac, you need XCode, also free.

The .clang-format file should be loaded into Visual Studio to maintain the 
standard code formatting used in this project.

There is a utility used to manage JUCE projects called Projucer that is
included when you download JUCE (http://www.juce.com/download) (you don't need
the actual JUCE source code, as this is already included in the repository).
Using this utility, you can update project properties such as the build version, 
and it will automatically update the relevant parameters for the Mac and Windows
projects. The Introjucer project file (MIDI2LR.jucer) is located in the root
directory.

When changing the version number, not only will you need to do so in Projucer,
but also in Info.lua (the VERSION variable), /tools/installer/MIDI2LR.xml, and
/tools/doxygen/Midi2lr.Doxyfile.

The project files for both platforms will be located in /build/ (MIDI2LR.sln for
Visual studio, and MIDI2LR.xcodeproj for XCode) once you've run Juce.

Database-driven translations and commands
------------------------------------------

Any new commands need to go into the the Database.lua file.

Build process
--------------------

1.
Then run LR and select Files -> Plugin Extras -> MIDI2LR -> Build Files. Follow
the instructions that are generated by that action:
GeneratedFromDatabase-ReadMe.txt. This step generates wiki files (.md).
2.
Then, On Windows, you simply need to build the project in Visual Studio. These
builds will reside in /build/Windows/.

On Mac, you need to build the project in XCode. These builds should reside in
/build/MacOS/.

Assembling the plugin
--------------------

Add the exe file (windows) or app directory (OSX) to a new directory named
MIDI2LR.lrplugin. Then add to MIDI2LR.lrplugin all the files in the project's
src/plugin/ directory, all the files in the data/application/fonts/ directory, and all the *.txt files in the data/plugin/ directory.

That plugin can then be installed in Lightroom as usual.

Translations
-------------
.po files are in the subdirectories of MIDI2LR/tools/translation_work. To update the translations in the data directories, run the scripts apptrans.sh convert.sh and installer.sh. The move the updated files to the correct directories.

unmatched_translations. will check that all the translations that rely on Lightroom resources have been properly matched. The .sh files are set up to run on a Linux system.

